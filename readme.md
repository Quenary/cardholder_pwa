# Cardholder_pwa is an app for storing your discount cards in one place.

## Why:

Yet another card holder. There are many apps to accomplish this goal, but they are either distributed in app stores or lack some features. Here are some most important aspects:

- PWA stands for progressive web app, so you can install it on device (e.g. smartphone) from browser and use offline (read-only of course)
- Easy to self-host
- Open-source

### Core

- Angular for frontend
- Python with FastAPI and SQLAlchemy for backend

### Deploy
- Using docker
```
# pull image
docker pull quenary/cardholder_pwa:latest

# run container
docker run -d -p 80:80 \
-v $HOME/.cardholder_pwa:/cardholder_pwa \
-e DB_URL=sqlite:////cardholder_pwa/cardholder_pwa.db \
quenary/cardholder_pwa:latest
```
- Using docker-compose
  - copy docker-compose.prod.yml file to desired location (or in portainer)
  - ```docker-compose -f docker-compose.prod.yml up -d```

### Build an image
```
git clone https://github.com/Quenary/cardholder_pwa.git
cd cardholder_pwa
docker-compose build
docker-compose up -d

# push image
docker login
docker-compose build
docker tag cardholder_pwa quenary/cardholder_pwa:<version>
docker push quenary/cardholder_pwa:<version>
```

### Environment variables with default values

- API_PATH=/api
- JWT_SECRET_KEY default is autogenerated so on every container restart tokens will be invalidated
- JWT_ALGORITHM=HS256
- ACCESS_TOKEN_LIFETIME_MIN=5
- REFRESH_TOKEN_LIFETIME_MIN=43200 (a month)
- DB_URL default is sqlite file located either in /cardholder_pwa (mounted $HOME/.cardholder_pwa with docker) for or in /backend for development
